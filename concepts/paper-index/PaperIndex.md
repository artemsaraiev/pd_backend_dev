# Concept: PaperIndex

+ **purpose** registry of papers by id (DOI or arXiv) with minimal metadata
+ **principle** papers can be added to the index, and paper metadata relevant to
us can be updated
+ **state**
  + a set of Papers with
    + a paperId String
    + an authors String[]
    + a links String[]
    + a title String?
+ **actions**
  + ensure(paperId: String, title?: string) : (paper: Paper)
    + **requires** nothing
    + **effects** if paper with given paperId is in the set of Papers, returns it.
    Otherwise, creates a new paper with the given paperId and title (if provided),
    and links and authors arrays set to empty arrays, and returns the new paper
  + updateMeta(paper: Paper, title: String) : ()
    + **requires** the paper is in the set of Papers
    + **effects** sets the title of the paper to the provided title
  + addAuthors(paper: Paper, authors: String[]) : ()
    + **requires** the paper is in the set of Papers
    + **effects** for each author in the provided authors array, if the author is not
    in the authors array of the paper, adds the author to the authors array of the
    paper
  + removeAuthors(paper: Paper, authors: String[]) : ()
    + **requires** the paper is in the set of Papers
    + **effects** for each author in the provided authors array, if the author is in
    the authors array of the paper, removes the author from the authors array of the
    paper
  + addLink(paper: Paper, url: String) : ()
    + **requires** the paper is in the set of Papers
    + **effects** if the url is not in the links array of the paper, adds the url to
    the links array of the paper
  + removeLink(paper: Paper, url: String) : ()
    + **requires** the paper is in the set of Papers
    + **effects** if the url is in the links array of the paper, removes the url from
    the links array of the paper. If url is not in the links array of the paper, does
    nothing

**Notes:**

+ paperId is not a unique Paper ID generated by mongodb, but rather an external unique
identifier for the paper (DOI or arXiv)
